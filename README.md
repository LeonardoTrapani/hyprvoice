# Hyprvoice

> **Voiceâ€‘powered typing for Wayland/Hyprland desktops** â€” press a global shortcut, speak, and watch words appear in whatever window youâ€™re focused on.

---

## Why does this hyprvoice exist?

Typing is slow, repetitive strain injuries are real, and proprietary speechâ€‘toâ€‘text solutions leak your data. This project aims to give Wayland users a fast, privacyâ€‘respecting alternative that works entirely on their own hardware _or_ any cloud ASR they trust.

---

## Key Features

| Category                  | Highlights                                                                                                   |
| ------------------------- | ------------------------------------------------------------------------------------------------------------ |
| **Hotâ€‘key daemon**        | Background service triggered by a global shortcut (via `hyprctl dispatch exec â€¦` or other compositor hooks). |
| **Live audio capture**    | Lowâ€‘latency PipeWire input with optional VAD/noise gate.                                                     |
| **Pluggable ASR**         | ğŸ”Œ Local Whisper (via `whisper.cpp`) or cloud APIs (OpenAI, Deepgram, AssemblyAI). Select at runtime.        |
| **Optional LLM polish**   | Feed raw transcript into a local Ollama model or GPTâ€‘4o to add punctuation, change tone, etc.                |
| **Text injection**        | `wtype`/`ydotool` sends keystrokes to the focused surface; clipboard fallback for stubborn clients.          |
| **Zeroâ€‘friction config**  | Single `~/.config/hyprvoice/config.toml` with sensible defaults and live reload on SIGHUP.                   |
| **Crossâ€‘platform binary** | Static Go build; no Python environment required.                                                             |

---

## QuickÂ Start (Arch / Hyprland)

```bash
# 1. Install from AUR (source build)
yay -S hyprvoice
#Â Â Â or preâ€‘built binary
yay -S hyprvoice-bin

# 2. Run the interactive setup helper
hyprvoice-install run --backend whispercpp

# 3. Enable the user service
systemctl --user enable --now hyprvoice.service

# 4. Add a key binding in Hyprland conf
bind = $mod, R, exec, hyprvoice toggle
```

---

## Configuration file (`~/.config/hyprvoice/config.toml`)

```toml
[asr]
backend = "whispercpp"      # whispercpp | openai
model   = "medium.en.bin"   # used if backend = whispercpp
api_key = ""                # used if backend = openai

[vad]
threshold = -45     # dBFS
hang_ms   = 300

[inject]
method = "wtype"   # wtype | ydotool | clipboard

[keybind]
# If you don't use Hyprland, set an XDG desktop accelerator here
shortcut = "CTRL+ALT+SPACE"
```

All options are documented in the sample config generated by `--init`.

---

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   PCM    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  chunks  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  text  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hotâ€‘key  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Audio   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   ASR    â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  Inject  â”‚
â”‚ Listener â”‚         â”‚ Capture  â”‚         â”‚ Adapter  â”‚       â”‚  (wtype) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–²                       â”‚                â”‚
                         â”‚  stats / errors       â”‚                â–¼
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚                  â”‚ Desktop  â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶   UI     â”‚
                                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Each box is a Go package inside `internal/` so you can swap implementations without touching public APIs.

---

## Building from Source

```bash
git clone https://github.com/leonardotrapani/hyprvoice.git
cd hyprvoice
# Compile
CGO_ENABLED=1 go build -o hyprvoice ./cmd/hyprvoice
# Run tests
go test ./...
```

**Requires** GoÂ 1.22+, a C compiler, and `pkg-config` with PipeWire headers.

---

Contributions welcome! Check the [issues](https://github.com/leonardotrapani/hyprvoice/issues) for good first tasks.

---

## License

This project is licensed under the MIT License. See the [LICENSE.md](LICENSE.md) file for details.
